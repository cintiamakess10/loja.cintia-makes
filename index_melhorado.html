<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cintia Makess | Loja Oficial</title>

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --primary:#D81B60;
      --primaryDark:#ad1457;
      --secondary:#fce4ec;
      --text:#2c3e50;
      --muted:#6b7280;
      --white:#fff;
      --shadow:0 6px 18px rgba(216,27,96,.18);
      --shadowStrong:0 12px 28px rgba(0,0,0,.18);
      --success:#25D366;
      --warning:#f59e0b;
    }

    *{ margin:0; padding:0; box-sizing:border-box; font-family:'Montserrat',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; }
    body{ background:var(--secondary); color:var(--text); padding-bottom:88px; }
    a{ color:inherit; }
    button, input, select, textarea{ font-family:inherit; }

    /* Acessibilidade */
    .sr-only{
      position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0;
    }
    :focus-visible{ outline: 3px solid rgba(216,27,96,.45); outline-offset: 2px; border-radius: 12px; }

    /* HEADER */
    header{
      background:var(--white);
      position:sticky; top:0; z-index:1000;
      box-shadow:var(--shadow);
    }
    .top-bar{
      background:var(--primary);
      color:#fff;
      text-align:center;
      font-size:.88rem;
      padding:10px 12px;
      font-weight:700;
      letter-spacing:.3px;
    }
    .nav-container{
      max-width:1200px;
      margin:0 auto;
      padding:14px 18px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
    }
    .logo{
      font-size:1.55rem;
      font-weight:900;
      color:var(--primary);
      cursor:pointer;
      text-transform:uppercase;
      letter-spacing:-1px;
      user-select:none;
      line-height:1.1;
    }
    .nav-menu{ display:none; gap:18px; align-items:center; }
    @media (min-width: 880px){ .nav-menu{ display:flex; } }

    .nav-link{
      cursor:pointer;
      font-weight:700;
      color:var(--text);
      transition:.2s;
      text-transform:uppercase;
      font-size:.88rem;
      padding:10px 10px;
      border-radius:12px;
      user-select:none;
      white-space:nowrap;
    }
    .nav-link:hover{ background:rgba(216,27,96,.08); color:var(--primary); }
    .nav-link.active{ color:var(--primary); background:rgba(216,27,96,.10); }

    .nav-icons{ display:flex; gap:14px; align-items:center; }
    .icon-btn{ cursor:pointer; position:relative; color:var(--primary); user-select:none; transition:.2s; padding:10px; border-radius:14px; }
    .icon-btn:hover{ background:rgba(216,27,96,.08); transform: translateY(-1px); }
    .badge{
      position:absolute;
      top:4px; right:4px;
      background:var(--primary);
      color:white;
      font-size:.72rem;
      width:18px; height:18px;
      border-radius:999px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:900;
      border:2px solid white;
    }

    /* HOME SEARCH */
    .hero-search-container{
      text-align:center;
      padding:18px;
      background:white;
      margin-bottom:18px;
      box-shadow: 0 2px 10px rgba(0,0,0,.05);
    }
    .main-search-bar{
      width:100%;
      max-width:640px;
      padding:15px 18px;
      border-radius:999px;
      border:2px solid #f4c8d9;
      font-size:1rem;
      outline:none;
      transition:.25s;
      box-shadow:0 10px 20px rgba(0,0,0,.06);
    }
    .main-search-bar:focus{ border-color: var(--primary); }

    /* HERO */
    .hero-section{
      max-width:1200px;
      margin:0 auto 18px auto;
      padding:18px;
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:48vh;
    }
    .showcase-card{
      background:white;
      border-radius:28px;
      box-shadow:0 22px 55px rgba(0,0,0,.11);
      display:flex;
      flex-direction:column;
      overflow:hidden;
      width:100%;
      max-width:980px;
      transition: opacity .5s ease;
      position:relative;
    }
    @media(min-width: 900px){
      .showcase-card{ flex-direction:row; height: 460px; }
    }
    .showcase-img{
      flex:1;
      background:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
      position:relative;
    }
    .showcase-img img{
      max-width:100%;
      max-height:360px;
      object-fit:contain;
      filter: drop-shadow(0 14px 26px rgba(0,0,0,.18));
      transition: transform .55s;
      border-radius:16px;
    }
    .showcase-card:hover .showcase-img img{ transform: scale(1.03); }
    .showcase-info{
      flex:1;
      padding:34px 28px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      background:linear-gradient(135deg, rgba(255,255,255,1) 0%, rgba(252,228,236,0.65) 100%);
    }
    .tag-highlight{
      background:var(--primary);
      color:#fff;
      padding:6px 14px;
      border-radius:999px;
      font-size:.8rem;
      text-transform:uppercase;
      width:fit-content;
      margin-bottom:12px;
      font-weight:900;
      letter-spacing:.2px;
    }
    .showcase-title{ font-size:1.9rem; color:var(--text); margin-bottom:12px; line-height:1.2; font-weight:900; }
    .showcase-desc{ color:#666; margin-bottom:18px; line-height:1.65; }
    .showcase-price{ font-size:2.3rem; color:var(--primary); font-weight:900; margin-bottom:18px; }
    .timer-bar{
      height:4px;
      background:var(--primary);
      width:0%;
      position:absolute;
      bottom:0; left:0;
      transition: width .1s linear;
    }

    /* SE√á√ïES */
    .view-section{ display:none; animation: fadeIn .35s; }
    .view-section.active{ display:block; }
    @keyframes fadeIn{ from{ opacity:0; transform:translateY(10px); } to{ opacity:1; transform:translateY(0); } }

    .shop-container{ max-width:1200px; margin:0 auto; padding:18px; }
    .section-title{ color:var(--primary); margin-bottom:18px; text-align:center; font-weight:900; }
    .section-subtitle{ text-align:center; color:var(--muted); margin: -6px auto 18px auto; max-width: 820px; line-height: 1.6; }

    /* BANNERS / CTA */
    .cta-row{
      max-width:1200px;
      margin:0 auto 18px auto;
      padding:0 18px;
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
    }
    @media(min-width: 900px){
      .cta-row{ grid-template-columns: 1.4fr 1fr; }
    }
    .cta-card{
      background:white;
      border-radius:18px;
      padding:18px;
      box-shadow: var(--shadow);
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .cta-card strong{ font-size:1.05rem; }
    .cta-pill{
      display:inline-flex;
      gap:8px;
      align-items:center;
      width:fit-content;
      background: rgba(216,27,96,.10);
      color: var(--primary);
      padding: 8px 12px;
      border-radius: 999px;
      font-weight: 800;
      font-size: .86rem;
    }

    /* FILTROS */
    .filters-bar{
      background:white;
      padding:14px 16px;
      border-radius:16px;
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      align-items:center;
      justify-content:space-between;
      margin-bottom:22px;
      box-shadow:0 2px 10px rgba(0,0,0,.06);
    }
    .filter-group{ display:flex; align-items:center; gap:10px; flex:1; min-width: 220px; }
    .filter-select{
      padding:11px 12px;
      border-radius:12px;
      border:1px solid #ddd;
      color:var(--text);
      outline:none;
      width:100%;
      background:#fff;
    }

    /* GRID PRODUTOS */
    .products-grid{
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap:18px;
    }
    .product-card{
      background:white;
      border-radius:20px;
      overflow:hidden;
      box-shadow: var(--shadow);
      transition: transform .25s, box-shadow .25s;
      cursor:pointer;
      display:flex;
      flex-direction:column;
      position:relative;
    }
    .product-card:hover{
      transform: translateY(-4px);
      box-shadow: var(--shadowStrong);
    }
    .p-img-box{
      height: 240px;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:14px;
      background:#fff;
    }
    .p-img-box img{ max-width:100%; max-height:100%; object-fit:contain; border-radius:14px; }
    .p-details{ padding:14px; text-align:center; display:flex; flex-direction:column; flex-grow:1; gap:6px; }
    .p-cat-label{ font-size:.75rem; color:#999; text-transform:uppercase; margin-bottom:2px; }
    .p-name{ font-weight:900; color:var(--text); font-size: 1rem; line-height: 1.25; }
    .p-price-tag{ font-size:1.5rem; color:var(--primary); font-weight:900; margin-top:auto; }

    /* BOT√ïES COMPRAS (DESTACADOS) */
    .btn-buy, .btn-add, .checkout-btn{
      border:none;
      cursor:pointer;
      font-weight:900;
      letter-spacing:.2px;
      user-select:none;
    }
    .btn-buy{
      width:100%;
      padding:13px 14px;
      border-radius:999px;
      background: linear-gradient(135deg, var(--primary) 0%, #ff4f8f 100%);
      color:#fff;
      margin-top:12px;
      box-shadow: 0 10px 20px rgba(216,27,96,.25);
      position: relative;
      transition: transform .15s, box-shadow .15s, filter .15s;
    }
    .btn-buy:hover{ transform: translateY(-1px); box-shadow: 0 14px 28px rgba(216,27,96,.32); filter: brightness(1.02); }
    .btn-buy:active{ transform: translateY(0px) scale(.99); }
    .btn-buy::after{
      content:"";
      position:absolute;
      inset:-2px;
      border-radius:999px;
      border:2px solid rgba(255,255,255,.35);
      pointer-events:none;
    }
    .btn-buy.pulse{
      animation: pulse 1.7s infinite;
    }
    @keyframes pulse{
      0%{ box-shadow: 0 10px 22px rgba(216,27,96,.22); }
      70%{ box-shadow: 0 16px 34px rgba(216,27,96,.45); }
      100%{ box-shadow: 0 10px 22px rgba(216,27,96,.22); }
    }

    /* BOT√ÉO SECUND√ÅRIO */
    .btn-secondary{
      width:100%;
      padding:12px 14px;
      border-radius:999px;
      border:2px solid rgba(216,27,96,.25);
      background: #fff;
      color: var(--primary);
      font-weight: 900;
      cursor:pointer;
      transition: .15s;
    }
    .btn-secondary:hover{ background: rgba(216,27,96,.06); transform: translateY(-1px); }

    /* NAV MOBILE */
    .mobile-nav{
      position:fixed;
      bottom:0; left:0; width:100%;
      background:white;
      display:flex;
      justify-content:space-around;
      padding:10px 8px;
      box-shadow:0 -2px 12px rgba(0,0,0,.12);
      z-index:900;
    }
    @media(min-width: 880px){ .mobile-nav{ display:none; } }
    .m-nav-item{
      display:flex; flex-direction:column; align-items:center;
      font-size:.72rem; color:#888; gap:4px;
      padding: 8px 10px; border-radius: 14px; user-select:none;
      cursor:pointer;
      min-width: 70px;
    }
    .m-nav-item.active{ color:var(--primary); font-weight:900; background: rgba(216,27,96,.08); }

    /* MODAL DETALHES */
    #product-detail{
      display:none;
      position:fixed; top:0; left:0;
      width:100%; height:100%;
      background: rgba(0,0,0,.55);
      z-index: 2000;
      backdrop-filter: blur(3px);
      overflow-y: auto;
      padding: 18px;
    }
    .detail-card{
      background:white;
      width:100%;
      max-width:860px;
      margin: 40px auto;
      border-radius: 22px;
      padding: 24px;
      position:relative;
      box-shadow: var(--shadowStrong);
    }
    .close-btn{
      position:absolute;
      top: 10px; right: 14px;
      font-size: 2rem;
      cursor: pointer;
      color: var(--primary);
      user-select:none;
    }
    .detail-layout{ display:flex; flex-wrap:wrap; gap: 18px; }
    .detail-layout .img-col{ flex:1; min-width: 240px; }
    .detail-layout .info-col{ flex:1; min-width: 240px; display:flex; flex-direction:column; justify-content:center; }
    #d-img{ width:100%; border-radius: 14px; background: #fff; }
    #d-title{ color: var(--primary); margin-bottom: 8px; font-weight: 900; }
    #d-price{ font-size: 2rem; color:#111; margin-bottom: 14px; font-weight: 900; }
    #d-desc{ color:#555; line-height: 1.65; margin-bottom: 18px; white-space: pre-line; }
    .detail-actions{ display:flex; flex-direction:column; gap:10px; }

    /* CARRINHO */
    #cart-sidebar{
      position:fixed; top:0; right:-420px;
      width:100%; max-width: 390px; height: 100vh;
      background:white;
      z-index: 3000;
      box-shadow: -6px 0 22px rgba(0,0,0,.15);
      transition: .35s;
      display:flex;
      flex-direction:column;
    }
    #cart-sidebar.open{ right:0; }
    .cart-header{
      padding: 18px;
      background: var(--primary);
      color:#fff;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 10px;
    }
    .cart-body{ flex:1; overflow-y:auto; padding: 18px; background: var(--secondary); }
    .cart-item{
      display:flex; gap: 10px;
      margin-bottom: 12px;
      background:white;
      padding: 10px;
      border-radius: 14px;
      box-shadow: 0 3px 10px rgba(0,0,0,.06);
    }
    .cart-item img{ width: 64px; height: 64px; object-fit: cover; border-radius: 10px; }
    .cart-controls button{
      width: 30px; height: 30px;
      border-radius: 999px;
      border: 1px solid rgba(216,27,96,.55);
      background: white;
      color: var(--primary);
      cursor:pointer;
      font-weight: 900;
    }
    .cart-footer{ padding: 16px; background: white; border-top: 1px solid #eee; }
    .checkout-btn{
      width:100%;
      padding: 14px 14px;
      border-radius: 999px;
      background: var(--success);
      color: white;
      font-size: 1rem;
      display:flex;
      justify-content:center;
      gap:10px;
      align-items:center;
      box-shadow: 0 12px 24px rgba(37,211,102,.25);
      transition: .15s;
    }
    .checkout-btn:hover{ transform: translateY(-1px); filter: brightness(1.02); }

    /* CHECKOUT MODAL */
    #checkout-modal{
      display:none;
      position:fixed; top:0; left:0;
      width:100%; height:100%;
      background: rgba(0,0,0,.55);
      z-index: 3500;
      backdrop-filter: blur(3px);
      overflow-y:auto;
      padding: 18px;
    }
    .checkout-card{
      background:white;
      width:100%;
      max-width: 860px;
      margin: 40px auto;
      border-radius: 22px;
      padding: 22px;
      position:relative;
      box-shadow: var(--shadowStrong);
    }
    .form-grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-top: 10px;
    }
    @media(min-width: 780px){
      .form-grid{ grid-template-columns: 1fr 1fr; }
    }
    .field{
      display:flex; flex-direction:column; gap: 6px;
      background: #fff;
    }
    .field label{ font-size:.88rem; color: var(--muted); font-weight: 800; }
    .field input, .field select, .field textarea{
      border: 1px solid #ddd;
      border-radius: 14px;
      padding: 12px 12px;
      outline:none;
      background:#fff;
    }
    .field textarea{ min-height: 92px; resize: vertical; }
    .mini-note{ font-size:.82rem; color: var(--muted); line-height:1.5; }

    /* ATENDIMENTO */
    .support-grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
      margin-top: 16px;
    }
    @media(min-width: 900px){
      .support-grid{ grid-template-columns: 1.1fr .9fr; }
    }
    .support-card{
      background:white;
      border-radius: 18px;
      padding: 18px;
      box-shadow: var(--shadow);
      display:flex;
      flex-direction:column;
      gap: 10px;
    }
    .support-card h3{ color: var(--primary); font-weight: 900; }
    .support-actions{ display:grid; grid-template-columns: 1fr; gap: 10px; }
    @media(min-width: 620px){ .support-actions{ grid-template-columns: 1fr 1fr; } }

    /* AVALIA√á√ïES */
    .review-wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 0 18px 18px 18px;
    }
    .review-panel{
      background:white;
      border-radius: 18px;
      padding: 18px;
      box-shadow: var(--shadow);
    }
    .tabs{ display:flex; gap:10px; flex-wrap:wrap; margin-bottom: 12px; }
    .tab{
      padding: 10px 14px;
      border-radius: 999px;
      background: rgba(216,27,96,.08);
      color: var(--primary);
      font-weight: 900;
      cursor:pointer;
      user-select:none;
      border: 2px solid transparent;
    }
    .tab.active{ background: var(--primary); color: #fff; border-color: rgba(255,255,255,.35); }
    .stars-row{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    .star{
      width: 44px; height: 44px;
      border-radius: 14px;
      display:flex; align-items:center; justify-content:center;
      background: rgba(245, 158, 11, .12);
      color: var(--warning);
      cursor:pointer;
      user-select:none;
      border: 2px solid rgba(245,158,11,.18);
      transition: .12s;
      font-size: 1.15rem;
      font-weight: 900;
    }
    .star.active{ background: rgba(245,158,11,.22); border-color: rgba(245,158,11,.35); transform: translateY(-1px); }
    .rating-summary{
      display:flex; align-items:center; gap:10px;
      padding: 10px 12px;
      border-radius: 16px;
      background: rgba(216,27,96,.06);
      margin: 12px 0 8px 0;
      flex-wrap:wrap;
    }
    .rating-pill{
      display:inline-flex; gap:8px; align-items:center;
      padding: 8px 12px;
      border-radius: 999px;
      background: #fff;
      box-shadow: 0 3px 10px rgba(0,0,0,.06);
      font-weight: 900;
      color: var(--primary);
    }
    .reviews-list{ margin-top: 14px; display:flex; flex-direction:column; gap: 10px; }
    .review-item{
      background: #fff;
      border-radius: 16px;
      padding: 12px;
      border: 1px solid #eee;
      box-shadow: 0 3px 10px rgba(0,0,0,.05);
    }
    .review-item .meta{ display:flex; justify-content:space-between; gap: 10px; flex-wrap:wrap; color: var(--muted); font-size: .82rem; }
    .review-item .comment{ margin-top: 8px; color:#333; line-height: 1.6; }

    /* TOAST */
    #toast{
      visibility:hidden;
      min-width: 250px;
      background-color: var(--primary);
      color:#fff;
      text-align:center;
      border-radius: 999px;
      padding: 14px 16px;
      position: fixed;
      z-index: 4000;
      left: 50%;
      bottom: 90px;
      transform: translateX(-50%);
      box-shadow: 0 14px 28px rgba(0,0,0,.18);
    }
    #toast.show{ visibility: visible; animation: fadein .35s, fadeout .35s 2.6s; }
    @keyframes fadein{ from{ bottom: 60px; opacity:0; } to{ bottom: 90px; opacity:1; } }
    @keyframes fadeout{ from{ bottom: 90px; opacity:1; } to{ bottom: 60px; opacity:0; } }

    /* FLOATING CTA (ATENDIMENTO HUMANO) */
    .floating-help{
      position: fixed;
      right: 16px;
      bottom: 108px;
      z-index: 1200;
      display:flex;
      flex-direction:column;
      gap: 10px;
      align-items:flex-end;
      pointer-events:none;
    }
    .floating-help button{ pointer-events:auto; }
    .fab{
      border:none;
      cursor:pointer;
      border-radius: 999px;
      padding: 12px 14px;
      display:flex;
      gap: 10px;
      align-items:center;
      box-shadow: var(--shadowStrong);
      font-weight: 900;
      color:#fff;
      background: var(--success);
      transition: .15s;
    }
    .fab:hover{ transform: translateY(-1px); filter: brightness(1.02); }
    .fab.secondary{
      background: linear-gradient(135deg, var(--primary) 0%, #ff4f8f 100%);
    }
  </style>
</head>

<body>
  <header>
    <div class="top-bar">üíñ Tudo por <strong>R$ 10,00</strong> | Atendimento r√°pido no WhatsApp | Entrega para Alum√≠nio e regi√£o</div>

    <div class="nav-container">
      <div class="logo" onclick="app.nav('home')" aria-label="Ir para a p√°gina inicial">Cintia Makess</div>

      <nav class="nav-menu" aria-label="Menu principal">
        <span class="nav-link" onclick="app.nav('home')">In√≠cio</span>
        <span class="nav-link" onclick="app.nav('shop')">Produtos</span>
        <span class="nav-link" onclick="app.nav('support')">Atendimento</span>
        <span class="nav-link" onclick="app.nav('reviews')">Avalia√ß√µes</span>
        <span class="nav-link" onclick="app.nav('faq')">D√∫vidas</span>
      </nav>

      <div class="nav-icons">
        <div class="icon-btn" onclick="app.toggleCart()" aria-label="Abrir carrinho">
          <span class="material-icons" aria-hidden="true">shopping_bag</span>
          <div class="badge" id="cart-count">0</div>
        </div>
      </div>
    </div>
  </header>

  <!-- CTA flutuante: atendimento humano e avalia√ß√µes -->
  <div class="floating-help" aria-label="Atalhos r√°pidos">
    <button class="fab secondary" onclick="app.nav('support')" aria-label="Falar com uma pessoa real">
      <span class="material-icons" aria-hidden="true">support_agent</span> Atendimento humano
    </button>
    <button class="fab" onclick="app.quickWhatsApp()" aria-label="Chamar no WhatsApp">
      <span class="material-icons" aria-hidden="true">chat</span> WhatsApp agora
    </button>
  </div>

  <!-- HOME -->
  <main id="view-home" class="view-section active">
    <div class="hero-search-container">
      <h2 style="color:var(--primary); margin-bottom:10px; font-weight:900;">O que voc√™ procura hoje?</h2>
      <p class="section-subtitle" style="margin-bottom: 12px;">
        Site simples, r√°pido e f√°cil de usar ‚Äî para todas as idades. Tudo por <strong>R$ 10,00</strong>.
      </p>
      <input type="text"
             class="main-search-bar"
             placeholder="Digite ex: 'La√ßo', 'Escova' ou 'Acess√≥rio'..."
             aria-label="Buscar produtos"
             onkeyup="if(event.key === 'Enter') app.searchFromHome(this.value)">
    </div>

    <div class="cta-row">
      <div class="cta-card">
        <div class="cta-pill"><span class="material-icons" aria-hidden="true" style="font-size:18px;">local_offer</span> Pre√ßo √∫nico</div>
        <strong>Todos os produtos custam R$ 10,00</strong>
        <span class="mini-note">Transpar√™ncia total: voc√™ escolhe, coloca no carrinho e finaliza rapidinho no WhatsApp.</span>
      </div>

      <div class="cta-card">
        <div class="cta-pill"><span class="material-icons" aria-hidden="true" style="font-size:18px;">support_agent</span> Atendimento humano</div>
        <strong>Quer ser atendido por uma pessoa real?</strong>
        <span class="mini-note">Temos uma √°rea s√≥ de atendimento para tirar d√∫vidas, enviar fotos e acompanhar o pedido.</span>
        <button class="btn-secondary" onclick="app.nav('support')">IR PARA ATENDIMENTO</button>
      </div>
    </div>

    <section class="hero-section" aria-label="Destaque do momento">
      <div class="showcase-card" id="hero-card">
        <div class="timer-bar" id="timer-bar"></div>
      </div>
    </section>

    <div style="text-align:center; margin-bottom: 24px;">
      <button class="btn-buy pulse" onclick="app.nav('shop')" style="width:auto; padding:14px 28px; font-size:1.08rem;">
        VER LOJA COMPLETA
      </button>
      <div class="mini-note" style="margin-top: 10px;">
        Dica: toque em um produto para ver detalhes e comprar.
      </div>
    </div>
  </main>

  <!-- LOJA -->
  <main id="view-shop" class="view-section">
    <div class="shop-container">
      <h2 class="section-title">Nossa Vitrine</h2>
      <p class="section-subtitle">
        Tudo por <strong>R$ 10,00</strong>. Bot√µes de compra destacados para ficar bem f√°cil no celular.
      </p>

      <div class="filters-bar" aria-label="Filtros de produtos">
        <div class="filter-group">
          <span class="material-icons" style="color:#999;">search</span>
          <input type="text" id="shop-search" placeholder="Buscar por nome..." class="filter-select" onkeyup="app.filterProducts(this.value, 'search')" aria-label="Filtrar por nome">
        </div>

        <div class="filter-group">
          <span class="material-icons" style="color:#999;">filter_list</span>
          <select id="catFilter" class="filter-select" onchange="app.filterProducts(this.value, 'cat')" aria-label="Filtrar por categoria">
            <option value="all">Todas as Categorias</option>
          </select>
        </div>

        <div class="filter-group">
          <span class="material-icons" style="color:#999;">sort</span>
          <select id="sortFilter" class="filter-select" onchange="app.filterProducts(this.value, 'sort')" aria-label="Ordenar produtos">
            <option value="az">A - Z</option>
            <option value="za">Z - A</option>
            <option value="low">Menor Pre√ßo</option>
            <option value="high">Maior Pre√ßo</option>
          </select>
        </div>
      </div>

      <div class="products-grid" id="shop-grid"></div>
    </div>
  </main>

  <!-- ATENDIMENTO -->
  <main id="view-support" class="view-section">
    <div class="shop-container">
      <h2 class="section-title">Atendimento Humano</h2>
      <p class="section-subtitle">
        Aqui voc√™ fala com uma pessoa real. Pode pedir foto/v√≠deo do produto, tirar d√∫vidas e acompanhar seu pedido.
      </p>

      <div class="support-grid">
        <div class="support-card">
          <h3>Fale agora (mais r√°pido)</h3>
          <div class="support-actions">
            <button class="checkout-btn" onclick="app.quickWhatsApp()">
              <span class="material-icons" aria-hidden="true">whatsapp</span> CHAMAR NO WHATSAPP
            </button>
            <button class="btn-secondary" onclick="app.openCheckoutFromSupport()">
              <span class="material-icons" aria-hidden="true" style="vertical-align: middle; font-size: 18px;">shopping_cart</span>
              Finalizar compra com ajuda
            </button>
          </div>
          <div class="mini-note">
            <strong>Hor√°rio sugerido:</strong> Seg a S√°b, 09h‚Äì18h (voc√™ pode ajustar depois).<br>
            Se n√£o responder na hora, sua mensagem fica registrada e a gente retorna.
          </div>
        </div>

        <div class="support-card">
          <h3>Pedir atendimento</h3>
          <div class="mini-note">Preencha rapidinho e clique em enviar. Isso j√° abre uma mensagem pronta no WhatsApp.</div>
          <div class="form-grid" style="margin-top: 6px;">
            <div class="field">
              <label for="supName">Seu nome</label>
              <input id="supName" placeholder="Ex: Maria" />
            </div>
            <div class="field">
              <label for="supCity">Cidade</label>
              <input id="supCity" placeholder="Ex: Alum√≠nio" />
            </div>
            <div class="field" style="grid-column: 1/-1;">
              <label for="supMsg">Como podemos ajudar?</label>
              <textarea id="supMsg" placeholder="Ex: Quero ver mais fotos da faixa de pel√∫cia e saber prazo de entrega."></textarea>
            </div>
          </div>
          <button class="btn-buy pulse" onclick="app.sendSupportRequest()">ENVIAR PARA UM ATENDENTE</button>
          <div class="mini-note">Ao clicar, voc√™ ser√° direcionado para o WhatsApp com a mensagem pronta.</div>
        </div>
      </div>
    </div>
  </main>

  <!-- AVALIA√á√ïES -->
  <main id="view-reviews" class="view-section">
    <div class="shop-container">
      <h2 class="section-title">Avalia√ß√µes</h2>
      <p class="section-subtitle">
        Ajude outras pessoas: avalie o <strong>site</strong> e a <strong>loja f√≠sica</strong> de 0 a 5 estrelas e escreva um coment√°rio.
      </p>
    </div>

    <div class="review-wrap">
      <div class="review-panel">
        <div class="tabs" aria-label="Tipo de avalia√ß√£o">
          <div class="tab active" id="tab-site" onclick="app.switchReviewTarget('site')">Site</div>
          <div class="tab" id="tab-store" onclick="app.switchReviewTarget('store')">Loja f√≠sica</div>
        </div>

        <div class="rating-summary" aria-label="Resumo das avalia√ß√µes">
          <span class="rating-pill"><span class="material-icons" aria-hidden="true">star</span> M√©dia: <span id="avg-rating">0.0</span>/5</span>
          <span class="rating-pill"><span class="material-icons" aria-hidden="true">reviews</span> Total: <span id="review-count">0</span></span>
        </div>

        <div class="field" style="margin-top: 6px;">
          <label>Escolha de 0 a 5 estrelas</label>
          <div class="stars-row" id="stars-row" aria-label="Selecionar estrelas"></div>
          <div class="mini-note">0 = ruim / 5 = excelente</div>
        </div>

        <div class="form-grid">
          <div class="field">
            <label for="revName">Seu nome (opcional)</label>
            <input id="revName" placeholder="Ex: Ana" />
          </div>
          <div class="field">
            <label for="revCity">Cidade (opcional)</label>
            <input id="revCity" placeholder="Ex: Alum√≠nio" />
          </div>
          <div class="field" style="grid-column: 1/-1;">
            <label for="revComment">Coment√°rio</label>
            <textarea id="revComment" placeholder="Conte sua experi√™ncia: atendimento, facilidade de comprar, entrega, etc."></textarea>
          </div>
        </div>

        <button class="btn-buy pulse" onclick="app.submitReview()">ENVIAR AVALIA√á√ÉO</button>

        <div class="reviews-list" id="reviews-list" aria-label="Lista de avalia√ß√µes"></div>
      </div>
    </div>
  </main>

  <!-- FAQ -->
  <main id="view-faq" class="view-section">
    <div class="shop-container" style="max-width: 880px;">
      <h2 class="section-title">D√∫vidas</h2>

      <div class="cta-card" style="margin-bottom: 14px;">
        <strong>üí° Dica para comprar r√°pido</strong>
        <span class="mini-note">Adicione ao carrinho e finalize. Voc√™ tamb√©m pode pedir ajuda no atendimento humano.</span>
        <div class="support-actions">
          <button class="btn-buy pulse" onclick="app.nav('shop')">ESCOLHER PRODUTOS</button>
          <button class="checkout-btn" onclick="app.quickWhatsApp()"><span class="material-icons">whatsapp</span> FALAR COM ATENDENTE</button>
        </div>
      </div>

      <div class="cta-card" style="margin-bottom: 14px;">
        <h3 style="color:var(--primary); margin-bottom: 6px;">Todos os produtos s√£o R$ 10,00?</h3>
        <p class="mini-note">Sim! O site foi ajustado para pre√ßo √∫nico. Se tiver promo√ß√µes futuras, podemos adicionar banners e cupons.</p>
      </div>

      <div class="cta-card" style="margin-bottom: 14px;">
        <h3 style="color:var(--primary); margin-bottom: 6px;">Como funciona o pagamento?</h3>
        <p class="mini-note">Voc√™ preenche os dados no checkout e finaliza no WhatsApp para combinar Pix, cart√£o ou entrega/retirada.</p>
      </div>

      <div class="cta-card" style="margin-bottom: 14px;">
        <h3 style="color:var(--primary); margin-bottom: 6px;">Precisa de ajuda para escolher?</h3>
        <p class="mini-note">Tem uma √°rea s√≥ para ser atendido por uma pessoa real. Pode enviar fotos e explicar o que precisa.</p>
        <button class="btn-secondary" onclick="app.nav('support')">IR PARA ATENDIMENTO HUMANO</button>
      </div>
    </div>
  </main>

  <!-- NAV MOBILE -->
  <nav class="mobile-nav" aria-label="Navega√ß√£o mobile">
    <div class="m-nav-item" onclick="app.nav('home')">
      <span class="material-icons">home</span> In√≠cio
    </div>
    <div class="m-nav-item" onclick="app.nav('shop')">
      <span class="material-icons">grid_view</span> Loja
    </div>
    <div class="m-nav-item" onclick="app.nav('support')">
      <span class="material-icons">support_agent</span> Atendimento
    </div>
    <div class="m-nav-item" onclick="app.nav('reviews')">
      <span class="material-icons">star_rate</span> Avaliar
    </div>
    <div class="m-nav-item" onclick="app.toggleCart()">
      <span class="material-icons">shopping_cart</span> Carrinho
    </div>
  </nav>

  <!-- MODAL DETALHE -->
  <div id="product-detail" onclick="if(event.target === this) app.closeDetail()">
    <div class="detail-card" role="dialog" aria-modal="true" aria-label="Detalhes do produto">
      <span class="close-btn" onclick="app.closeDetail()" aria-label="Fechar">&times;</span>

      <div class="detail-layout">
        <div class="img-col">
          <img id="d-img" alt="Foto do produto" src="">
        </div>
        <div class="info-col">
          <h2 id="d-title"></h2>
          <div class="mini-note" style="margin-bottom:6px;">Pre√ßo √∫nico</div>
          <h3 id="d-price"></h3>
          <p id="d-desc"></p>

          <div class="detail-actions">
            <button class="btn-buy pulse" id="d-btn">ADICIONAR AO CARRINHO</button>
            <button class="btn-secondary" onclick="app.quickWhatsAppProduct()">TIRAR D√öVIDAS COM ATENDENTE</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- CARRINHO -->
  <div id="cart-sidebar" aria-label="Carrinho de compras">
    <div class="cart-header">
      <h3 style="font-weight:900;">Meu Carrinho üíñ</h3>
      <div style="display:flex; gap:6px; align-items:center;">
        <span class="material-icons" onclick="app.toggleCart()" style="cursor:pointer;" aria-label="Fechar carrinho">close</span>
      </div>
    </div>

    <div class="cart-body" id="cart-items"></div>

    <div class="cart-footer">
      <div style="display:flex; justify-content:space-between; font-size: 1.1rem; font-weight: 900; margin-bottom: 12px;">
        <span>Total:</span>
        <span id="cart-total" style="color: var(--primary);">R$ 0,00</span>
      </div>

      <button class="btn-buy pulse" onclick="app.openCheckout()" aria-label="Continuar para o checkout">
        CONTINUAR PARA CHECKOUT
      </button>

      <div class="mini-note" style="text-align:center; margin-top: 10px;">
        Prefere falar com algu√©m? <a href="javascript:void(0)" onclick="app.nav('support')" style="font-weight:900; color:var(--primary);">Atendimento humano</a>.
      </div>
    </div>
  </div>

  <!-- CHECKOUT -->
  <div id="checkout-modal" onclick="if(event.target === this) app.closeCheckout()">
    <div class="checkout-card" role="dialog" aria-modal="true" aria-label="Checkout">
      <span class="close-btn" onclick="app.closeCheckout()" aria-label="Fechar checkout">&times;</span>

      <h2 style="color: var(--primary); font-weight: 900; margin-bottom: 6px;">Checkout r√°pido</h2>
      <p class="mini-note">
        Preencha os dados e finalize no WhatsApp. Assim o atendimento fica mais r√°pido e sem erros.
      </p>

      <div class="form-grid">
        <div class="field">
          <label for="ckName">Nome</label>
          <input id="ckName" placeholder="Seu nome" />
        </div>
        <div class="field">
          <label for="ckPhone">Telefone (com DDD)</label>
          <input id="ckPhone" placeholder="Ex: (15) 99999-9999" />
        </div>
        <div class="field">
          <label for="ckMethod">Entrega ou retirada</label>
          <select id="ckMethod">
            <option value="Entrega">Entrega</option>
            <option value="Retirada">Retirada na loja</option>
          </select>
        </div>
        <div class="field">
          <label for="ckPay">Forma de pagamento</label>
          <select id="ckPay">
            <option value="Pix">Pix</option>
            <option value="Cart√£o de cr√©dito">Cart√£o de cr√©dito</option>
            <option value="Cart√£o de d√©bito">Cart√£o de d√©bito</option>
            <option value="Dinheiro">Dinheiro</option>
          </select>
        </div>
        <div class="field" style="grid-column: 1/-1;">
          <label for="ckAddress">Endere√ßo (se entrega) / Observa√ß√µes</label>
          <textarea id="ckAddress" placeholder="Rua, n√∫mero, bairro, complemento... ou observa√ß√µes."></textarea>
        </div>
      </div>

      <div class="cta-card" style="margin-top: 14px;">
        <strong>Resumo do pedido</strong>
        <div class="mini-note" id="ckSummary">Seu carrinho est√° vazio.</div>
      </div>

      <div class="support-actions" style="margin-top: 12px;">
        <button class="checkout-btn" onclick="app.finishWhatsApp()">
          <span class="material-icons" aria-hidden="true">whatsapp</span> FINALIZAR NO WHATSAPP
        </button>
        <button class="btn-secondary" onclick="app.nav('support'); app.closeCheckout();">
          Falar com atendente
        </button>
      </div>
    </div>
  </div>

  <div id="toast" role="status" aria-live="polite">Produto adicionado!</div>

  <script>
    // ====== PRODUTOS (Pre√ßo √∫nico R$10) ======
    const PRICE_UNICO = 10.00;

    const products = [
      { id: 1, name: "Faixa de Cabelo Pel√∫cia (Estampada)", price: PRICE_UNICO, cat: "Acess√≥rios", img: "faixa_pelucia.jpg",
        desc: "Faixa de cabelo de pel√∫cia super confort√°vel. Ideal para skincare, maquiagem e dia a dia." },
      { id: 2, name: "Massageador para Couro Cabeludo (Silicone)", price: PRICE_UNICO, cat: "Beleza", img: "massageador.jpg",
        desc: "Massageador de silicone para usar no banho ou em massagens relaxantes. Ajuda na limpeza e est√≠mulo do couro cabeludo." },
      { id: 3, name: "La√ßo Cl√°ssico (Acess√≥rio de Cabelo)", price: PRICE_UNICO, cat: "Acess√≥rios", img: "laco_classico.jpg",
        desc: "La√ßo elegante para completar o look. Combina com todas as idades." },
      { id: 4, name: "Chaveiros Pel√∫cia (Bichinhos)", price: PRICE_UNICO, cat: "Presentes", img: "chaveiro_pelucia.jpg",
        desc: "Chaveiros fofinhos e macios. √ìtimos para mochila, bolsa e presente." },
      { id: 5, name: "Escova Desembara√ßadora (Cores)", price: PRICE_UNICO, cat: "Beleza", img: "escova_tangle.jpg",
        desc: "Escova pr√°tica para desembara√ßar sem puxar. Boa para todos os tipos de cabelo." },
      { id: 6, name: "Escova Raquete / Massageadora (Cores)", price: PRICE_UNICO, cat: "Beleza", img: "escova_raquete.jpg",
        desc: "Escova raquete confort√°vel para o dia a dia. Excelente para uso r√°pido e sem esfor√ßo." },
      { id: 7, name: "Presilha La√ßo Dourada (Metal)", price: PRICE_UNICO, cat: "Acess√≥rios", img: "presilha_dourada.jpg",
        desc: "Presilha met√°lica estilo la√ßo ‚Äî moderna, firme e linda para qualquer ocasi√£o." },
      { id: 8, name: "√ìculos Cora√ß√£o (Estilo)", price: PRICE_UNICO, cat: "Moda", img: "oculos_coracao.jpg",
        desc: "√ìculos em formato de cora√ß√£o para compor looks estilosos. Perfeito para fotos e eventos." },
      { id: 9, name: "Kit Acess√≥rios Infantil (Presilhas + El√°stico)", price: PRICE_UNICO, cat: "Infantil", img: "kit_infantil.jpg",
        desc: "Kit com presilhas e el√°sticos fofos. Ideal para crian√ßas (e tamb√©m para quem ama acess√≥rios!)." },
    ];

    const app = {
      cart: JSON.parse(localStorage.getItem('cintiaCart')) || [],
      whatsapp: "5515974072640",

      // avalia√ß√µes
      reviewTarget: "site",
      selectedStars: 5,

      init: () => {
        app.updateCartCount();
        app.renderShop(products);
        app.populateCategories();
        app.startCarousel();
        app.renderCart();
        app.initReviews();
        app.setActiveNav('home');
      },

      nav: (viewId) => {
        document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
        const view = document.getElementById('view-' + viewId);
        if(view) view.classList.add('active');

        app.closeDetail();
        app.closeCheckout();

        app.setActiveNav(viewId);
        window.scrollTo({ top: 0, behavior: 'smooth' });
      },

      setActiveNav: (viewId) => {
        document.querySelectorAll('.nav-link').forEach(el => el.classList.remove('active'));
        const map = { home:0, shop:1, support:2, reviews:3, faq:4 };
        const idx = map[viewId];
        if(idx !== undefined){
          const links = document.querySelectorAll('.nav-link');
          if(links[idx]) links[idx].classList.add('active');
        }

        document.querySelectorAll('.m-nav-item').forEach(el => el.classList.remove('active'));
        const mMap = { home:0, shop:1, support:2, reviews:3, cart:4, faq:0 };
        const midx = mMap[viewId];
        if(midx !== undefined){
          const m = document.querySelectorAll('.m-nav-item');
          if(m[midx]) m[midx].classList.add('active');
        }
      },

      searchFromHome: (term) => {
        if(!term) return;
        app.nav('shop');
        document.getElementById('shop-search').value = term;
        app.filterProducts(term, 'search');
      },

      startCarousel: () => {
        const card = document.getElementById('hero-card');

        const updateHero = () => {
          card.style.opacity = '0';

          setTimeout(() => {
            const randomP = products[Math.floor(Math.random() * products.length)];

            card.innerHTML = `
              <div class="showcase-img">
                <img src="${randomP.img}" alt="Foto do produto ${randomP.name}"
                     onerror="this.src='https://placehold.co/520x360?text=Foto+do+Produto'">
              </div>
              <div class="showcase-info">
                <div class="tag-highlight">Destaque do Momento</div>
                <div class="showcase-title">${randomP.name}</div>
                <div class="showcase-desc">${randomP.desc}</div>
                <div class="showcase-price">R$ ${randomP.price.toFixed(2).replace('.',',')}</div>
                <button class="btn-buy pulse" onclick="app.addToCart(${randomP.id})">COMPRAR AGORA</button>
                <button class="btn-secondary" onclick="app.openDetail(${randomP.id})">Ver detalhes</button>
              </div>
              <div class="timer-bar" id="timer-bar"></div>
            `;

            card.style.opacity = '1';

            setTimeout(() => {
              const bar = document.getElementById('timer-bar');
              if(bar) bar.style.width = '100%';
            }, 90);

          }, 420);
        };

        updateHero();
        setInterval(updateHero, 9000);
      },

      populateCategories: () => {
        const cats = [...new Set(products.map(p => p.cat))].sort((a,b) => a.localeCompare(b));
        const select = document.getElementById('catFilter');
        cats.forEach(c => {
          const opt = document.createElement('option');
          opt.value = c;
          opt.innerText = c;
          select.appendChild(opt);
        });
      },

      filterProducts: (val, type) => {
        let filtered = [...products];

        const searchVal = type === 'search' ? val : document.getElementById('shop-search').value;
        const catVal = type === 'cat' ? val : document.getElementById('catFilter').value;
        const sortVal = type === 'sort' ? val : document.getElementById('sortFilter').value;

        if(searchVal) filtered = filtered.filter(p => p.name.toLowerCase().includes(searchVal.toLowerCase()));
        if(catVal !== 'all') filtered = filtered.filter(p => p.cat === catVal);

        if(sortVal === 'az') filtered.sort((a,b) => a.name.localeCompare(b.name));
        if(sortVal === 'za') filtered.sort((a,b) => b.name.localeCompare(a.name));
        if(sortVal === 'low') filtered.sort((a,b) => a.price - b.price);
        if(sortVal === 'high') filtered.sort((a,b) => b.price - a.price);

        app.renderShop(filtered);
      },

      renderShop: (list) => {
        const grid = document.getElementById('shop-grid');
        if(!grid) return;

        if(list.length === 0){
          grid.innerHTML = '<div style="grid-column:1/-1; text-align:center; padding: 40px; color:#888;">Nenhum produto encontrado.</div>';
          return;
        }

        grid.innerHTML = list.map(p => `
          <div class="product-card" onclick="app.openDetail(${p.id})" aria-label="Abrir detalhes do produto ${p.name}">
            <div class="p-img-box">
              <img src="${p.img}" alt="Foto do produto ${p.name}"
                   onerror="this.src='https://placehold.co/520x520?text=Foto+Produto'">
            </div>
            <div class="p-details">
              <span class="p-cat-label">${p.cat}</span>
              <div class="p-name">${p.name}</div>
              <div class="p-price-tag">R$ ${p.price.toFixed(2).replace('.',',')}</div>
              <button class="btn-buy pulse" onclick="event.stopPropagation(); app.addToCart(${p.id})">COMPRAR</button>
            </div>
          </div>
        `).join('');
      },

      openDetail: (id) => {
        const p = products.find(x => x.id === id);
        if(!p) return;

        app.lastDetailId = id;

        const img = document.getElementById('d-img');
        img.src = p.img;
        img.onerror = () => { img.src = 'https://placehold.co/860x860?text=Foto+Produto'; };

        document.getElementById('d-title').innerText = p.name;
        document.getElementById('d-price').innerText = `R$ ${p.price.toFixed(2).replace('.',',')}`;
        document.getElementById('d-desc').innerText = p.desc;

        document.getElementById('d-btn').onclick = () => { app.addToCart(p.id); app.closeDetail(); };

        document.getElementById('product-detail').style.display = 'block';
      },

      closeDetail: () => {
        const modal = document.getElementById('product-detail');
        if(modal) modal.style.display = 'none';
      },

      addToCart: (id) => {
        const existing = app.cart.find(item => item.id === id);
        if(existing) existing.qty++;
        else app.cart.push({ id, qty: 1 });

        app.saveCart();
        app.showToast("Adicionado ao carrinho! üíñ");
        app.toggleCart(true);
      },

      removeFromCart: (id) => {
        app.cart = app.cart.filter(x => x.id !== id);
        app.saveCart();
      },

      changeQty: (id, delta) => {
        const item = app.cart.find(x => x.id === id);
        if(!item) return;
        item.qty += delta;
        if(item.qty <= 0) app.removeFromCart(id);
        app.saveCart();
      },

      saveCart: () => {
        localStorage.setItem('cintiaCart', JSON.stringify(app.cart));
        app.updateCartCount();
        app.renderCart();
        app.updateCheckoutSummary();
      },

      renderCart: () => {
        const container = document.getElementById('cart-items');
        if(!container) return;

        let total = 0;

        if(app.cart.length === 0){
          container.innerHTML = '<div style="text-align:center; color:#999; margin-top: 40px;">Seu carrinho est√° vazio üõçÔ∏è</div>';
        } else {
          container.innerHTML = app.cart.map(item => {
            const p = products.find(x => x.id === item.id);
            if(!p) return '';
            total += p.price * item.qty;

            return `
              <div class="cart-item">
                <img src="${p.img}" alt="Foto do produto ${p.name}" onerror="this.src='https://placehold.co/200?text=Foto'">
                <div style="flex:1;">
                  <div style="font-weight:900; font-size:.92rem;">${p.name}</div>
                  <div style="color:var(--primary); font-weight:900;">R$ ${(p.price * item.qty).toFixed(2).replace('.',',')}</div>
                  <div class="cart-controls" style="margin-top: 8px; display:flex; align-items:center; gap:10px;">
                    <button onclick="app.changeQty(${item.id}, -1)" aria-label="Diminuir quantidade">-</button>
                    <span style="font-weight:900;">${item.qty}</span>
                    <button onclick="app.changeQty(${item.id}, 1)" aria-label="Aumentar quantidade">+</button>
                  </div>
                </div>
                <span class="material-icons" style="color:#9aa0a6; cursor:pointer;" onclick="app.removeFromCart(${item.id})" aria-label="Remover do carrinho">delete</span>
              </div>
            `;
          }).join('');
        }

        document.getElementById('cart-total').innerText = `R$ ${total.toFixed(2).replace('.',',')}`;
        app.updateCheckoutSummary();
      },

      updateCartCount: () => {
        const count = app.cart.reduce((acc, item) => acc + item.qty, 0);
        document.getElementById('cart-count').innerText = count;
      },

      toggleCart: (forceOpen=false) => {
        const sidebar = document.getElementById('cart-sidebar');
        if(!sidebar) return;

        if(forceOpen){
          sidebar.classList.add('open');
        } else {
          sidebar.classList.toggle('open');
        }
      },

      openCheckout: () => {
        if(app.cart.length === 0){
          alert("Adicione produtos ao carrinho primeiro üòä");
          return;
        }
        document.getElementById('checkout-modal').style.display = 'block';
        app.updateCheckoutSummary();
      },

      closeCheckout: () => {
        const modal = document.getElementById('checkout-modal');
        if(modal) modal.style.display = 'none';
      },

      updateCheckoutSummary: () => {
        const el = document.getElementById('ckSummary');
        if(!el) return;

        if(app.cart.length === 0){
          el.innerText = "Seu carrinho est√° vazio.";
          return;
        }

        let total = 0;
        let lines = [];
        app.cart.forEach(item => {
          const p = products.find(x => x.id === item.id);
          if(!p) return;
          const sub = p.price * item.qty;
          total += sub;
          lines.push(`‚Ä¢ ${item.qty}x ${p.name} (R$ ${sub.toFixed(2).replace('.',',')})`);
        });

        el.innerText = `${lines.join('\n')}\n\nTotal: R$ ${total.toFixed(2).replace('.',',')}`;
      },

      finishWhatsApp: () => {
        if(app.cart.length === 0) return;

        const name = (document.getElementById('ckName').value || '').trim();
        const phone = (document.getElementById('ckPhone').value || '').trim();
        const method = document.getElementById('ckMethod').value;
        const pay = document.getElementById('ckPay').value;
        const address = (document.getElementById('ckAddress').value || '').trim();

        let msg = `Ol√°! üëã Quero finalizar meu pedido pelo site.\n\n`;

        if(name) msg += `Nome: ${name}\n`;
        if(phone) msg += `Telefone: ${phone}\n`;
        msg += `Entrega/Retirada: ${method}\n`;
        msg += `Pagamento: ${pay}\n`;
        if(address) msg += `Endere√ßo/Obs: ${address}\n`;

        msg += `\nüõçÔ∏è Itens:\n`;

        let total = 0;
        app.cart.forEach(item => {
          const p = products.find(x => x.id === item.id);
          const subtotal = p.price * item.qty;
          total += subtotal;
          msg += `‚ñ™Ô∏è ${item.qty}x ${p.name}\n`;
        });

        msg += `\nüí∞ Total: R$ ${total.toFixed(2).replace('.',',')}\n`;
        msg += `\nPode confirmar disponibilidade e prazo, por favor? üíñ`;

        const link = `https://wa.me/${app.whatsapp}?text=${encodeURIComponent(msg)}`;
        window.open(link, '_blank');
      },

      openCheckoutFromSupport: () => {
        if(app.cart.length === 0){
          app.nav('shop');
          app.showToast("Escolha produtos primeiro üòä");
          return;
        }
        app.openCheckout();
      },

      quickWhatsApp: () => {
        const msg = "Ol√°! üëã Quero falar com uma pessoa real para tirar d√∫vidas e/ou fazer um pedido.";
        const link = `https://wa.me/${app.whatsapp}?text=${encodeURIComponent(msg)}`;
        window.open(link, '_blank');
      },

      quickWhatsAppProduct: () => {
        const id = app.lastDetailId;
        const p = products.find(x => x.id === id);
        const msg = p
          ? `Ol√°! üëã Quero falar com uma pessoa real sobre este produto:\n\n‚Ä¢ ${p.name}\n\nPode me ajudar?`
          : "Ol√°! üëã Quero falar com uma pessoa real para tirar d√∫vidas.";
        const link = `https://wa.me/${app.whatsapp}?text=${encodeURIComponent(msg)}`;
        window.open(link, '_blank');
      },

      sendSupportRequest: () => {
        const name = (document.getElementById('supName').value || '').trim();
        const city = (document.getElementById('supCity').value || '').trim();
        const msgUser = (document.getElementById('supMsg').value || '').trim();

        let msg = "Ol√°! üëã Quero ser atendido por uma pessoa real.\n\n";
        if(name) msg += `Nome: ${name}\n`;
        if(city) msg += `Cidade: ${city}\n`;
        if(msgUser) msg += `\nMensagem: ${msgUser}\n`;
        msg += "\nObrigado(a)! üíñ";

        const link = `https://wa.me/${app.whatsapp}?text=${encodeURIComponent(msg)}`;
        window.open(link, '_blank');
      },

      initReviews: () => {
        const starsRow = document.getElementById('stars-row');
        starsRow.innerHTML = "";
        for(let i=0;i<=5;i++){
          const btn = document.createElement('div');
          btn.className = 'star';
          btn.setAttribute('role','button');
          btn.setAttribute('tabindex','0');
          btn.setAttribute('aria-label', `Selecionar ${i} estrelas`);
          btn.innerHTML = `<span class="material-icons" aria-hidden="true">star</span><span style="margin-left:6px;">${i}</span>`;
          btn.onclick = () => app.setStars(i);
          btn.onkeydown = (e) => { if(e.key === 'Enter' || e.key === ' ') app.setStars(i); };
          starsRow.appendChild(btn);
        }
        app.setStars(5);
        app.switchReviewTarget('site');
      },

      switchReviewTarget: (target) => {
        app.reviewTarget = target;
        document.getElementById('tab-site').classList.toggle('active', target === 'site');
        document.getElementById('tab-store').classList.toggle('active', target === 'store');
        app.refreshReviewsUI();
      },

      setStars: (n) => {
        app.selectedStars = n;
        const stars = [...document.querySelectorAll('#stars-row .star')];
        stars.forEach((el, idx) => {
          const val = idx;
          el.classList.toggle('active', val === n);
        });
      },

      getReviewsKey: () => `cintia_reviews_${app.reviewTarget}`,

      loadReviews: () => {
        try{ return JSON.parse(localStorage.getItem(app.getReviewsKey())) || []; }
        catch(e){ return []; }
      },

      saveReviews: (list) => {
        localStorage.setItem(app.getReviewsKey(), JSON.stringify(list));
      },

      submitReview: () => {
        const comment = (document.getElementById('revComment').value || '').trim();
        const name = (document.getElementById('revName').value || '').trim();
        const city = (document.getElementById('revCity').value || '').trim();

        if(!comment){
          app.showToast("Escreva um coment√°rio üòä");
          return;
        }

        const list = app.loadReviews();
        list.unshift({
          stars: app.selectedStars,
          comment,
          name: name || "An√¥nimo",
          city: city || "",
          at: new Date().toISOString()
        });
        app.saveReviews(list);

        document.getElementById('revComment').value = "";
        app.showToast("Avalia√ß√£o enviada! ‚≠ê Obrigado(a)!");
        app.refreshReviewsUI();
      },

      refreshReviewsUI: () => {
        const list = app.loadReviews();

        const countEl = document.getElementById('review-count');
        const avgEl = document.getElementById('avg-rating');
        const listEl = document.getElementById('reviews-list');

        const count = list.length;
        let avg = 0;
        if(count > 0){
          const sum = list.reduce((a,r) => a + Number(r.stars || 0), 0);
          avg = sum / count;
        }

        countEl.innerText = String(count);
        avgEl.innerText = avg.toFixed(1);

        if(count === 0){
          listEl.innerHTML = `<div class="mini-note" style="text-align:center; padding: 10px 0;">Nenhuma avalia√ß√£o ainda. Seja o primeiro(a)! üíñ</div>`;
          return;
        }

        listEl.innerHTML = list.map(r => {
          const date = new Date(r.at);
          const when = isNaN(date.getTime()) ? "" : date.toLocaleString('pt-BR');
          const city = r.city ? ` ‚Ä¢ ${r.city}` : "";
          return `
            <div class="review-item">
              <div class="meta">
                <div><strong>${r.name}</strong>${city}</div>
                <div>${when}</div>
              </div>
              <div style="margin-top:6px; color: var(--warning); font-weight: 900;">
                ${"‚òÖ".repeat(r.stars)}${"‚òÜ".repeat(5 - r.stars)} <span style="color:var(--muted); font-weight: 800;">(${r.stars}/5)</span>
              </div>
              <div class="comment">${app.escapeHtml(r.comment)}</div>
            </div>
          `;
        }).join('');
      },

      escapeHtml: (str) => {
        return String(str)
          .replaceAll("&","&amp;")
          .replaceAll("<","&lt;")
          .replaceAll(">","&gt;")
          .replaceAll('"',"&quot;")
          .replaceAll("'","&#039;")
          .replaceAll("\n","<br>");
      },

      showToast: (msg) => {
        const x = document.getElementById('toast');
        x.innerText = msg;
        x.className = "show";
        setTimeout(() => { x.className = x.className.replace("show", ""); }, 3000);
      }
    };

    app.init();
  </script>
</body>
</html>
